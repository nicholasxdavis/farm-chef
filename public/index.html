
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARMesilla</title>
    <meta name="description" content="Farm-to-Table Restaurant Menu">
    <meta name="author" content="FARMesilla">
    <meta property="og:title" content="FARMesilla">
    <meta property="og:description" content="Farm-to-Table Restaurant Menu">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        farm: {
                            50: '#f0f9f0',
                            100: '#dcf2dc',
                            200: '#bce5bc',
                            300: '#8fd58f',
                            400: '#5bb85b',
                            500: '#369936',
                            600: '#2a7d2a',
                            700: '#236423',
                            800: '#1f501f',
                            900: '#1a421a',
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        .menu-card {
            transition: all 0.3s ease;
        }
        .menu-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .modal-backdrop {
            backdrop-filter: blur(4px);
        }
        
        .mobile-menu-item {
            touch-action: manipulation;
        }
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 1rem;
                max-height: calc(100vh - 2rem);
                overflow-y: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <h1 class="text-2xl sm:text-3xl font-bold text-farm-600">FARMesilla</h1>
                    <span class="ml-2 text-sm text-gray-500 hidden sm:inline">Farm-to-Table</span>
                </div>
                <button id="menu-management-btn" class="bg-farm-500 hover:bg-farm-600 text-white px-4 py-2 rounded-lg transition-colors font-medium">
                    <span class="hidden sm:inline">Menu Management</span>
                    <span class="sm:hidden">Manage</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Menu Display -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div id="menu-display">
            <!-- Menu categories and items will be displayed here -->
        </div>
    </main>

    <!-- Menu Management Modal -->
    <div id="management-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-6xl modal-content">
                <!-- Modal Header -->
                <div class="bg-farm-500 text-white p-4 sm:p-6 rounded-t-2xl">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl sm:text-2xl font-bold">Menu Management Dashboard</h2>
                        <button id="close-management" class="text-white hover:text-gray-200 text-2xl font-bold p-2 hover:bg-farm-600 rounded-lg transition-colors">
                            √ó
                        </button>
                    </div>
                </div>

                <!-- Dashboard Content -->
                <div class="p-4 sm:p-6">
                    <!-- Action Buttons -->
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6">
                        <button id="add-item-btn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-xl font-medium transition-colors flex items-center justify-center">
                            <span class="text-lg mr-2">+</span>
                            Add Menu Item
                        </button>
                        <button id="add-category-btn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-xl font-medium transition-colors flex items-center justify-center">
                            <span class="text-lg mr-2">üìÅ</span>
                            Add Category
                        </button>
                        <button id="export-menu-btn" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-xl font-medium transition-colors flex items-center justify-center">
                            <span class="text-lg mr-2">üì•</span>
                            Export Menu
                        </button>
                    </div>

                    <!-- Menu Items Grid -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <h3 class="text-lg sm:text-xl font-semibold mb-4 text-gray-800">Current Menu Items</h3>
                        <div id="admin-menu-items" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Menu items will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="item-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md modal-content">
                <div class="bg-farm-500 text-white p-4 rounded-t-2xl">
                    <div class="flex justify-between items-center">
                        <h3 id="item-modal-title" class="text-lg sm:text-xl font-bold">Add Menu Item</h3>
                        <button id="close-item-modal" class="text-white hover:text-gray-200 text-2xl font-bold p-2 hover:bg-farm-600 rounded-lg transition-colors">
                            √ó
                        </button>
                    </div>
                </div>
                
                <form id="item-form" class="p-4 sm:p-6 space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Name</label>
                        <input type="text" id="item-name" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="item-description" rows="3" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent resize-none"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Price ($)</label>
                        <input type="number" id="item-price" step="0.01" min="0" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Image URL</label>
                        <input type="url" id="item-image-url" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent">
                        <a href="http://nicholasxdavis.github.io/cards-img/index.html" target="_blank" class="inline-block mt-2 text-sm text-blue-600 hover:text-blue-800 underline">
                            Upload IMGs into URLs here
                        </a>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="item-category" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent">
                            <!-- Categories will be populated here -->
                        </select>
                    </div>
                    
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="item-available" class="w-4 h-4 text-farm-600 bg-gray-100 border-gray-300 rounded focus:ring-farm-500">
                        <label for="item-available" class="text-sm font-medium text-gray-700">Available</label>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-3 pt-4">
                        <button type="submit" class="flex-1 bg-farm-500 hover:bg-farm-600 text-white py-3 px-4 rounded-xl font-medium transition-colors">
                            Save Item
                        </button>
                        <button type="button" id="cancel-item" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="category-modal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md modal-content">
                <div class="bg-farm-500 text-white p-4 rounded-t-2xl">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg sm:text-xl font-bold">Add Category</h3>
                        <button id="close-category-modal" class="text-white hover:text-gray-200 text-2xl font-bold p-2 hover:bg-farm-600 rounded-lg transition-colors">
                            √ó
                        </button>
                    </div>
                </div>
                
                <form id="category-form" class="p-4 sm:p-6">
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category Name</label>
                        <input type="text" id="category-name" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-farm-500 focus:border-transparent" required>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button type="submit" class="flex-1 bg-farm-500 hover:bg-farm-600 text-white py-3 px-4 rounded-xl font-medium transition-colors">
                            Add Category
                        </button>
                        <button type="button" id="cancel-category" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Menu data
        let menuData = {
            categories: ['APPETIZERS', 'MAIN COURSES', 'DESSERTS', 'BEVERAGES'],
            items: [
                {
                    id: 1,
                    name: 'Farm Fresh Salad',
                    description: 'Mixed greens with seasonal vegetables',
                    price: 12.99,
                    category: 'APPETIZERS',
                    image: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=300&h=200&fit=crop',
                    available: true
                },
                {
                    id: 2,
                    name: 'Grilled Chicken',
                    description: 'Free-range chicken with herbs',
                    price: 18.99,
                    category: 'MAIN COURSES',
                    image: 'https://images.unsplash.com/photo-1598103442097-8b74394b95c6?w=300&h=200&fit=crop',
                    available: true
                }
            ]
        };

        let editingItemId = null;

        // DOM elements
        const managementBtn = document.getElementById('menu-management-btn');
        const managementModal = document.getElementById('management-modal');
        const closeManagement = document.getElementById('close-management');
        const itemModal = document.getElementById('item-modal');
        const categoryModal = document.getElementById('category-modal');
        const addItemBtn = document.getElementById('add-item-btn');
        const addCategoryBtn = document.getElementById('add-category-btn');
        const exportMenuBtn = document.getElementById('export-menu-btn');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadMenuData();
            displayMenu();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Modal controls
            managementBtn.addEventListener('click', () => {
                managementModal.classList.remove('hidden');
                displayAdminMenu();
            });

            closeManagement.addEventListener('click', () => {
                managementModal.classList.add('hidden');
            });

            // Close modals when clicking outside
            [managementModal, itemModal, categoryModal].forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });

            // Action buttons
            addItemBtn.addEventListener('click', () => {
                editingItemId = null;
                showItemModal('Add Menu Item');
            });

            addCategoryBtn.addEventListener('click', () => {
                showCategoryModal();
            });

            exportMenuBtn.addEventListener('click', exportMenu);

            // Form submissions
            document.getElementById('item-form').addEventListener('submit', handleItemSubmit);
            document.getElementById('category-form').addEventListener('submit', handleCategorySubmit);

            // Cancel buttons
            document.getElementById('cancel-item').addEventListener('click', () => {
                itemModal.classList.add('hidden');
            });

            document.getElementById('cancel-category').addEventListener('click', () => {
                categoryModal.classList.add('hidden');
            });

            // Close buttons
            document.getElementById('close-item-modal').addEventListener('click', () => {
                itemModal.classList.add('hidden');
            });

            document.getElementById('close-category-modal').addEventListener('click', () => {
                categoryModal.classList.add('hidden');
            });
        }

        function loadMenuData() {
            const saved = localStorage.getItem('farmesilla-menu');
            if (saved) {
                menuData = JSON.parse(saved);
            }
        }

        function saveMenuData() {
            localStorage.setItem('farmesilla-menu', JSON.stringify(menuData));
        }

        function displayMenu() {
            const menuDisplay = document.getElementById('menu-display');
            menuDisplay.innerHTML = '';

            menuData.categories.forEach(category => {
                const categoryItems = menuData.items.filter(item => 
                    item.category === category && item.available
                );

                if (categoryItems.length === 0) return;

                const categorySection = document.createElement('div');
                categorySection.className = 'mb-12';
                categorySection.innerHTML = `
                    <h2 class="text-2xl sm:text-3xl font-bold text-farm-600 mb-6 text-center">${getCategoryDisplayName(category)}</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${categoryItems.map(item => `
                            <div class="menu-card bg-white rounded-2xl shadow-lg overflow-hidden">
                                <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                                <div class="p-6">
                                    <h3 class="text-xl font-semibold text-gray-800 mb-2">${item.name}</h3>
                                    <p class="text-gray-600 mb-4 text-sm">${item.description}</p>
                                    <div class="text-2xl font-bold text-farm-600">$${item.price.toFixed(2)}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                menuDisplay.appendChild(categorySection);
            });
        }

        function displayAdminMenu() {
            const adminMenuItems = document.getElementById('admin-menu-items');
            adminMenuItems.innerHTML = '';

            if (menuData.items.length === 0) {
                adminMenuItems.innerHTML = `
                    <div class="col-span-full text-center py-12 text-gray-500">
                        <div class="text-4xl mb-4">üçΩÔ∏è</div>
                        <p class="text-lg">No menu items yet. Add your first item!</p>
                    </div>
                `;
                return;
            }

            menuData.items.forEach(item => {
                const itemCard = document.createElement('div');
                itemCard.className = 'mobile-menu-item bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow';
                itemCard.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <h4 class="font-semibold text-gray-800 mb-1">${item.name}</h4>
                        <p class="text-xs text-gray-600 mb-2 line-clamp-2">${item.description}</p>
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-lg font-bold text-farm-600">$${item.price.toFixed(2)}</span>
                            <span class="text-xs px-2 py-1 rounded-full ${item.available ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                ${item.available ? 'Available' : 'Unavailable'}
                            </span>
                        </div>
                        <div class="text-xs text-gray-500 mb-3">${getCategoryDisplayName(item.category)}</div>
                        <div class="flex gap-2">
                            <button onclick="editItem(${item.id})" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-medium transition-colors">
                                Edit
                            </button>
                            <button onclick="deleteItem(${item.id})" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-3 rounded-lg text-sm font-medium transition-colors">
                                Delete
                            </button>
                        </div>
                    </div>
                `;
                adminMenuItems.appendChild(itemCard);
            });
        }

        function showItemModal(title) {
            document.getElementById('item-modal-title').textContent = title;
            populateCategorySelect();
            
            if (editingItemId) {
                const item = menuData.items.find(i => i.id === editingItemId);
                if (item) {
                    document.getElementById('item-name').value = item.name;
                    document.getElementById('item-description').value = item.description;
                    document.getElementById('item-price').value = item.price;
                    document.getElementById('item-image-url').value = item.image;
                    document.getElementById('item-category').value = item.category;
                    document.getElementById('item-available').checked = item.available;
                }
            } else {
                document.getElementById('item-form').reset();
                document.getElementById('item-available').checked = true;
            }
            
            itemModal.classList.remove('hidden');
        }

        function showCategoryModal() {
            document.getElementById('category-form').reset();
            categoryModal.classList.remove('hidden');
        }

        function populateCategorySelect() {
            const select = document.getElementById('item-category');
            select.innerHTML = menuData.categories.map(cat => 
                `<option value="${cat}">${getCategoryDisplayName(cat)}</option>`
            ).join('');
        }

        function getCategoryDisplayName(category) {
            return category.replace(/_/g, ' ');
        }

        function handleItemSubmit(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('item-name').value,
                description: document.getElementById('item-description').value,
                price: parseFloat(document.getElementById('item-price').value),
                image: document.getElementById('item-image-url').value || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop',
                category: document.getElementById('item-category').value,
                available: document.getElementById('item-available').checked
            };

            if (editingItemId) {
                const itemIndex = menuData.items.findIndex(i => i.id === editingItemId);
                menuData.items[itemIndex] = { ...menuData.items[itemIndex], ...formData };
            } else {
                const newItem = {
                    id: Date.now(),
                    ...formData
                };
                menuData.items.push(newItem);
            }

            saveMenuData();
            displayMenu();
            displayAdminMenu();
            itemModal.classList.add('hidden');
        }

        function handleCategorySubmit(e) {
            e.preventDefault();
            
            const categoryName = document.getElementById('category-name').value.trim().toUpperCase();
            
            if (!menuData.categories.includes(categoryName)) {
                menuData.categories.push(categoryName);
                saveMenuData();
                displayMenu();
            }
            
            categoryModal.classList.add('hidden');
        }

        function editItem(id) {
            editingItemId = id;
            showItemModal('Edit Menu Item');
        }

        function deleteItem(id) {
            if (confirm('Are you sure you want to delete this item?')) {
                menuData.items = menuData.items.filter(item => item.id !== id);
                saveMenuData();
                displayMenu();
                displayAdminMenu();
            }
        }

        function exportMenu() {
            const dataStr = JSON.stringify(menuData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'farmesilla-menu.json';
            link.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
